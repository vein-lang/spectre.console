<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link href="/assets/styles.css" rel="stylesheet" />
        <link rel="preconnect" href="https://fonts.gstatic.com" />
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;700&display=swap" rel="stylesheet" />

        <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png">

        <title>Spectre.Console - Specifying Settings</title>
        <meta name="description" content="How to define command line argument settings for your *Spectre.Console.Cli* Commands" />

            <meta name="twitter:card" content="summary_large_image" />
            <meta name="og:title" content="Spectre.Console - Specifying Settings" />
            <meta name="og:description" content="How to define command line argument settings for your *Spectre.Console.Cli* Commands" />
            <meta name="og:image" content="https://spectreconsole.net/cli/settings-social.png" />

    </head>
    <body class="antialiased text-gray-600 min-h-full flex flex-col  bg-gray-50">
        <header class="flex-none text-sm font-medium bg-gradient-to-b from-gray-200 to-gray-100 ring-1 ring-gray-900 ring-opacity-5 shadow py-2 md:py-4">
            <nav class="flex flex-row container mx-auto items-center">
                <a class="flex flex-row  items-center" href="/">
                    <img id="logo" class="w-auto h-10 md:h-12" height="48" width="48" src="/assets/logo.svg" alt="Spectre.Console">
                    <span class="text-lg md:text-2xl font-light ml-2 lg:ml-4 font-mono tracking-tighter">Spectre.Console</span>
                </a>
                <div class="ml-auto">
                    <ul class="flex flex-row">
                        <li>
                            <a class="flex flex-row items-center text-red-700" href="https://github.com/sponsors/patriksvensson">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <title>Sponsor</title>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                                </svg>
                                <span class="hidden sm:block">Sponsor</span>
                            </a>
                        </li>
                        <li class="ml-4">
                            <a class="flex flex-row items-center text-gray-600" href="https://github.com/spectreconsole/spectre.console">
                                <svg role="img" class="h-6 w-6 mr-2"  stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <title>GitHub icon</title>
                                    <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
                                <span class="hidden sm:block">GitHub</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
        </header>
        <main class="container mx-auto pt-4 md:pt-8 w-full">
            <div class="flex flex-col-reverse lg:flex-row">
                <nav class="flex-none font-light text-sm xl:text-base sm:mr-16 mt-8 pt-6 lg:mt-0 lg:pt-0 border-t border-gray-300 lg:border-t-0">
                    <div class="text-xl">
<a href="/">Welcome</a>                    </div>
                        <div class="text-blue-700 mt-4">
<a href="/sponsors">Sponsors</a>                        </div>
                        <div class="text-blue-700 mt-4">
<a href="/quick-start">Quick Start</a>                        </div>
                        <div class="text-blue-700 mt-4">
<a href="/blog">Recent Blog Posts</a>                        </div>
                            <div class="ml-2 flex flex-row flex-wrap lg:flex-col border-separate">
                                    <div class="mt-2 mr-4">
                                        <a href="/blog/release-notes">Release Notes</a>
                                    </div>
                                    <div class="mt-2 mr-4">
                                        <a href="/blog/news">News</a>
                                    </div>
                            </div>
                        <div class="text-blue-700 mt-4">
<a href="/markup">Markup</a>                        </div>
                        <div class="text-blue-700 mt-4">
<a href="/exceptions">Exceptions</a>                        </div>
                        <div class="text-blue-700 mt-4">
<a href="/live">Live</a>                        </div>
                            <div class="ml-2 flex flex-row flex-wrap lg:flex-col border-separate">
                                    <div class="mt-2 mr-4">
                                        <a href="/live/live-display">Live Display</a>
                                    </div>
                                    <div class="mt-2 mr-4">
                                        <a href="/live/progress">Progress</a>
                                    </div>
                                    <div class="mt-2 mr-4">
                                        <a href="/live/status">Status</a>
                                    </div>
                            </div>
                        <div class="text-blue-700 mt-4">
<a href="/prompts">Prompts</a>                        </div>
                            <div class="ml-2 flex flex-row flex-wrap lg:flex-col border-separate">
                                    <div class="mt-2 mr-4">
                                        <a href="/prompts/text">Text prompt</a>
                                    </div>
                                    <div class="mt-2 mr-4">
                                        <a href="/prompts/selection">Selection</a>
                                    </div>
                                    <div class="mt-2 mr-4">
                                        <a href="/prompts/multiselection">Multi Selection</a>
                                    </div>
                            </div>
                        <div class="text-blue-700 mt-4">
<a href="/widgets">Widgets</a>                        </div>
                            <div class="ml-2 flex flex-row flex-wrap lg:flex-col border-separate">
                                    <div class="mt-2 mr-4">
                                        <a href="/widgets/table">Table</a>
                                    </div>
                                    <div class="mt-2 mr-4">
                                        <a href="/widgets/tree">Tree</a>
                                    </div>
                                    <div class="mt-2 mr-4">
                                        <a href="/widgets/barchart">Bar Chart</a>
                                    </div>
                                    <div class="mt-2 mr-4">
                                        <a href="/widgets/rule">Rule</a>
                                    </div>
                                    <div class="mt-2 mr-4">
                                        <a href="/widgets/calendar">Calendar</a>
                                    </div>
                                    <div class="mt-2 mr-4">
                                        <a href="/widgets/figlet">Figlet</a>
                                    </div>
                                    <div class="mt-2 mr-4">
                                        <a href="/widgets/canvas">Canvas</a>
                                    </div>
                                    <div class="mt-2 mr-4">
                                        <a href="/widgets/canvas-image">Canvas Image</a>
                                    </div>
                            </div>
                        <div class="text-blue-700 mt-4">
<a href="/cli">Spectre.Console.Cli</a>                        </div>
                            <div class="ml-2 flex flex-row flex-wrap lg:flex-col border-separate">
                                    <div class="mt-2 mr-4">
                                        <a href="/cli/getting-started">Getting Started</a>
                                    </div>
                                    <div class="mt-2 mr-4">
                                        <a href="/cli/introduction">Introduction</a>
                                    </div>
                                    <div class="mt-2 mr-4">
                                        <a href="/cli/commandapp">CommandApp</a>
                                    </div>
                                    <div class="mt-2 mr-4 font-bold">
                                        <a href="/cli/settings">Specifying Settings</a>
                                    </div>
                                    <div class="mt-2 mr-4">
                                        <a href="/cli/commands">Creating Commands</a>
                                    </div>
                                    <div class="mt-2 mr-4">
                                        <a href="/cli/composing">Composing Commands</a>
                                    </div>
                                    <div class="mt-2 mr-4">
                                        <a href="/cli/migration">Migrate from Spectre.Cli</a>
                                    </div>
                            </div>
                        <div class="text-blue-700 mt-4">
<a href="/appendix">Appendix</a>                        </div>
                            <div class="ml-2 flex flex-row flex-wrap lg:flex-col border-separate">
                                    <div class="mt-2 mr-4">
                                        <a href="/appendix/colors">Colors</a>
                                    </div>
                                    <div class="mt-2 mr-4">
                                        <a href="/appendix/styles">Styles</a>
                                    </div>
                                    <div class="mt-2 mr-4">
                                        <a href="/appendix/borders">Borders</a>
                                    </div>
                                    <div class="mt-2 mr-4">
                                        <a href="/appendix/emojis">Emojis</a>
                                    </div>
                                    <div class="mt-2 mr-4">
                                        <a href="/appendix/spinners">Spinners</a>
                                    </div>
                            </div>
                </nav>
                <article class="flex-1 min-w-0">
                    <header class="text-gray-800 mb-4">
                        <h1 class="text-4xl font-extrabold">Specifying Settings</h1>
                        
                    </header>
                    <div class="prose max-w-none prose-sm lg:prose lg:max-w-none 2xl:prose-xl 2xl:max-w-none text-gray-700 font-light">
                        <p>Settings for <code>Spectre.Console.Cli</code> commands are defined via classes that inherit from <code>CommandSettings</code>. Attributes are used to indicate how the parser interprets the command line arguments and create a runtime instance of the settings to be used.</p>
<p>Example:</p>
<pre><code class="language-csharp">public sealed class MyCommandSettings : CommandSettings
{
    [CommandArgument(0, &quot;[name]&quot;)]
    public string Name { get; set; }

    [CommandOption(&quot;-c|--count&quot;)]
    public int Count { get; set; }
}
</code></pre>
<p>This setting file tells <code>Spectre.Console.Cli</code> that our command has two parameters. One is marked as a <code>CommandArgument</code>, the other is a <code>CommandOption</code>.</p>
<h2 id="commandargument">CommandArgument</h2>
<p>Arguments have a position and a name. The name is not only used for generating help, but its formatting is used to determine whether or not the argument is optional. The name must either be surrounded by square brackets (e.g. <code>[name]</code>) or angle brackets (e.g. <code>&lt;name&gt;</code>). Angle brackets denote required whereas square brackets denote optional. If neither are specified an exception will be thrown.</p>
<p>The position is used for scenarios where there could be more than one argument.</p>
<p>For example, we could split the above name argument into two values with an optional last name.</p>
<pre><code class="language-csharp">[CommandArgument(0, &quot;&lt;firstName&gt;&quot;)]
public string FirstName { get; set; }

[CommandArgument(1, &quot;[lastName]&quot;)]
public string LastName { get; set; }
</code></pre>
<h2 id="commandoption">CommandOption</h2>
<p><code>CommandOption</code> is used when you have options that are passed in command line switches. The attribute has one parameter - a pipe delimited string with the list of argument names. The following rules apply:</p>
<ul>
<li>As many names can be specified as you wish, they just can't conflict with other arguments.</li>
<li>Options with a single character must be preceded by a single dash (e.g. <code>-c</code>).</li>
<li>Multi-character options must be preceded by two dashes (e.g. <code>--count</code>).</li>
</ul>
<h3 id="flags">Flags</h3>
<p>There is a special mode for <code>CommandOptions</code> on boolean types. Typically all <code>CommandOptions</code> require a value to be included after the switch. For these only the switch needs to be specified to mark the value as true. This example would allow the user to run either <code>app.exe --debug</code>, or <code>app.exe --debug true</code>.</p>
<pre><code class="language-csharp">[CommandOption(&quot;--debug&quot;)]
public bool Debug { get; set; }
</code></pre>
<h2 id="description">Description</h2>
<p>When rendering help the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.componentmodel.descriptionattribute?view=net-5.0"><code>System.ComponentModel.Description</code></a> attribute is supported for specifying the text displayed to the user for both <code>CommandOption</code> and <code>CommandArgument</code>.</p>
<h2 id="defaultvalue">DefaultValue</h2>
<p>The <a href="https://docs.microsoft.com/en-us/dotnet/api/system.componentmodel.defaultvalueattribute?view=net-5.0"><code>System.ComponentModel.DefaultValue</code></a> attribute supported to specify a default value for a command. For example, in the hello example displaying hello for a default count of zero wouldn't make sense. We can change this to a single hello:</p>
<pre><code class="language-csharp">[CommandOption(&quot;-c|--count&quot;)]
[DefaultValue(1)]
public int Count { get; set; }
</code></pre>
<h2 id="typeconverter">TypeConverter</h2>
<p><code>System.ComponentModel.TypeConverter</code> is supported for more complex arguments, such as mapping log levels to an enum via a <a href="https://docs.microsoft.com/en-us/dotnet/api/system.componentmodel.typeconverter?view=net-5.0"><code>TypeConverter</code></a>.</p>
<h2 id="arrays">Arrays</h2>
<p><code>CommandArgument</code> can be defined as arrays and any additional parameters will be included in the value. For example</p>
<pre><code class="language-csharp">[CommandArgument(0, &quot;[name]&quot;)]
public string[] Name { get; set; }
</code></pre>
<p>Would allow the user to run <code>app.exe Dwayne Elizondo &quot;Mountain Dew&quot; Herbert Camacho</code>. The settings passed to the command would have a 5 element array consisting of Dwayne, Elizondo, Mountain Dew, Herbert and Camacho.</p>
<h2 id="constructors">Constructors</h2>
<p><code>Spectre.Console.Cli</code> supports constructor initialization and init only initialization. For constructor initialization, the parameter name of the constructor must match the name of the property name of the settings class. Order does not matter.</p>
<pre><code class="language-csharp">public class Settings
{
    public Settings(string[] name)
    {
        Name = name;
    }

    [Description(&quot;The name to display&quot;)]
    [CommandArgument(0, &quot;[Name]&quot;)]
    public string Name { get; }
}
</code></pre>
<p>Also supported are init only properties.</p>
<pre><code class="language-csharp">public class Settings
{
    [Description(&quot;The name to display&quot;)]
    [CommandArgument(0, &quot;[Name]&quot;)]
    public string Name { get; init; }
}
</code></pre>
<h2 id="validation">Validation</h2>
<p>Simple type validation is performed automatically, but for scenarios where more complex validation is required, overriding the <code>Validate</code> method is supported. This method must return either <code>ValidationResult.Error</code> or <code>ValidationResult.Success</code>.</p>
<pre><code class="language-csharp">public class Settings
{
    [Description(&quot;The name to display&quot;)]
    [CommandArgument(0, &quot;[Name]&quot;)]
    public string Name { get; init; }

    public override ValidationResult Validate()
    {
        return Name.Length &lt; 2
            ? ValidationResult.Error(&quot;Names must be at least two characters long&quot;)
            : ValidationResult.Success();
    }
}
</code></pre>

                    </div>
                </article>
            </div>
        </main>

        <footer class="py-4 md:py-8 mt-8 bg-gray-100 text-sm border-t border-gray-200">
            <div class="container">
                <div class="flex flex-row">
                    <span>Â© 2021 Patrik Svensson, Phil Scott</span>
                    <span class="ml-auto">1.0.0</span>
                </div>
            </div>
        </footer>


    <script>
        // adapted from https://www.w3schools.com/howto/howto_js_filter_table.asp
        function search(input, searchTarget, columnIndex) {
            // Declare variables
            var filter, table, tr, td, i, txtValue;
            filter = input.value.toUpperCase();
            table = document.getElementById(searchTarget);
            tr = table.getElementsByTagName("tr");

            // Loop through all table rows, and hide those who don't match the search query
            for (i = 0; i < tr.length; i++) {
                td = tr[i].getElementsByTagName("td")[columnIndex];
                if (td) {
                    txtValue = td.textContent || td.innerText;
                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                    } else {
                        tr[i].style.display = "none";
                    }
                }
            }
        }
    </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/prism.min.js" integrity="sha512-YBk7HhgDZvBxmtOfUdvX0z8IH2d10Hp3aEygaMNhtF8fSOvBZ16D/1bXZTJV6ndk/L/DlXxYStP8jrF77v2MIg==" crossorigin="anonymous"></script>
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/plugins/autoloader/prism-autoloader.min.js" integrity="sha512-zc7WDnCM3aom2EziyDIRAtQg1mVXLdILE09Bo+aE1xk0AM2c2cVLfSW9NrxE5tKTX44WBY0Z2HClZ05ur9vB6A==" crossorigin="anonymous"></script>
        <script src="/assets/asciinema-player.js"></script>
    </body>
</html>